(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{1118:function(n,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return a(8397)}])},2598:function(n,s,a){"use strict";a.d(s,{W:function(){return useFunds},m:function(){return FundsProvider}});var o=a(5893),h=a(7294),d=a(6205);let C=(0,h.createContext)(),FundsProvider=n=>{let{children:s}=n,[a,x]=(0,h.useState)([]),[S,D]=(0,h.useState)(!0);return(0,h.useEffect)(()=>{d.ZP.loadFunds().then(n=>{x(n),D(!1)})},[]),(0,o.jsx)(C.Provider,{value:{funds:a,loading:S},children:s})},useFunds=()=>(0,h.useContext)(C)},8397:function(n,s,a){"use strict";a.r(s),a.d(s,{default:function(){return App}});var o=a(5893),h=a(7294),d=a(9008),C=a.n(d);a(2050);var x=a(2598);function App(n){let{Component:s,pageProps:a}=n,[d,S]=(0,h.useState)({investmentStyle:"",selectedFunds:[],allocations:{},riskProfile:{},optimizedPortfolio:null});return(0,h.useEffect)(()=>{let n=globalThis.portfolioStorage||{};Object.keys(n).length>0&&S(n)},[]),(0,h.useEffect)(()=>{globalThis.portfolioStorage=d},[d]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(C(),{children:[(0,o.jsx)("title",{children:"SIPP Portfolio Manager"}),(0,o.jsx)("meta",{name:"description",content:"Optimize your SIPP pension investments with our 3-step portfolio manager"}),(0,o.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,o.jsx)("link",{rel:"icon",href:"images/portfolio_192_192.png"}),(0,o.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,o.jsx)("meta",{name:"theme-color",content:"#2563eb"}),(0,o.jsx)("link",{rel:"apple-touch-icon",href:"images/portfolio_192_192.png"})]}),(0,o.jsx)(x.m,{children:(0,o.jsxs)("div",{className:"container",children:[(0,o.jsx)("div",{className:"header",children:(0,o.jsx)("h1",{children:"SIPP & ISA Portfolio Manager"})}),(0,o.jsx)("div",{className:"main-card",children:(0,o.jsx)(s,{...a,portfolioData:d,updatePortfolioData:n=>{S(s=>({...s,...n}))}})})]})})]})}},6205:function(n,s,a){"use strict";a.d(s,{NV:function(){return d}});var o=a(7460),h=a.n(o);let d=new class{getFullPath(n){let s=n.startsWith("/")?n.slice(1):n,a=this.basePath.endsWith("/")?this.basePath.slice(0,-1):this.basePath;return"".concat(a,"/").concat(s)}async loadFunds(){if(this.loaded||this.loading)return this.funds;this.loading=!0;try{let n=this.getFullPath("/data/funds.csv");console.log("Loading funds from: ".concat(n));let s=await fetch(n);if(!s.ok)throw Error("Failed to fetch funds.csv: ".concat(s.status));let a=await s.text(),o=h().parse(a,{header:!0,dynamicTyping:!0,skipEmptyLines:!0,delimitersToGuess:[",","	","|",";"],transformHeader:n=>n.trim(),transform:(n,s)=>"string"==typeof n&&(n=n.trim(),""===n||"N/A"===n||"null"===n)?null:n});return o.errors.length>0&&console.warn("CSV parsing warnings:",o.errors),this.funds=o.data.filter(n=>n.fund_name&&n.sedol),this.loaded=!0,this.loading=!1,console.log("Loaded ".concat(this.funds.length," funds from CSV")),this.funds}catch(n){throw this.loading=!1,console.error("Error loading funds:",n),n}}getRangeCutoffDate(n){let s=new Date,a=s.getFullYear();switch(n){case"1mo":return new Date(s.getTime()-2592e6).getTime()/1e3;case"3mo":return new Date(s.getTime()-7776e6).getTime()/1e3;case"6mo":return new Date(s.getTime()-15552e6).getTime()/1e3;case"ytd":return new Date(a,0,1).getTime()/1e3;case"1y":return new Date(s.getTime()-31536e6).getTime()/1e3;case"2y":return new Date(s.getTime()-63072e6).getTime()/1e3;case"5y":return new Date(s.getTime()-15768e7).getTime()/1e3;case"10y":return new Date(s.getTime()-31536e7).getTime()/1e3;case"max":return null;default:throw Error("Invalid range: ".concat(n,". Valid ranges are: 1mo, 3mo, 6mo, ytd, 1y, 2y, 5y, 10y, max"))}}filterPriceDataByRange(n,s){let a=this.getRangeCutoffDate(s);return null===a?n:n.filter(n=>n.timestamp>=a)}async fetchPriceData(n,s){if(!n||0===n.length)throw Error("No funds provided");let a=["1mo","3mo","6mo","ytd","1y","2y","5y","10y","max"];if(!a.includes(s))throw Error("Invalid range: ".concat(s,". Valid ranges are: ").concat(a.join(", ")));return await Promise.all(n.map(async n=>{var a,o,h,d,C,x;let S;if(!n.yahoo_symbol)throw Error("No Yahoo symbol found for ".concat(n.fund_name));let D=n.yahoo_symbol;if(this.priceDataCache.has(D))console.log("Using cached data for ".concat(n.fund_name," (").concat(n.yahoo_symbol,")")),S=this.priceDataCache.get(D);else{console.log("Fetching data for ".concat(n.fund_name," (").concat(n.yahoo_symbol,")"));let s=this.getFullPath("/data/quotes_yahoo/".concat(n.yahoo_symbol,".json"));console.log("Loading price data from: ".concat(s));let a=await fetch(s);if(!a.ok)throw Error("Failed to fetch data for ".concat(n.fund_name,": ").concat(a.status));S=await a.json(),this.priceDataCache.set(D,S)}if(!(null===(x=S.chart)||void 0===x?void 0:null===(C=x.result)||void 0===C?void 0:null===(d=C[0])||void 0===d?void 0:null===(h=d.indicators)||void 0===h?void 0:null===(o=h.adjclose)||void 0===o?void 0:null===(a=o[0])||void 0===a?void 0:a.adjclose))throw Error("No price data available for ".concat(n.fund_name));let O=S.chart.result[0].timestamp,T=S.chart.result[0].indicators.adjclose[0].adjclose,I=T.map((n,s)=>({timestamp:O[s],price:n})).filter(n=>null!==n.price),j=this.filterPriceDataByRange(I,s);if(0===j.length)throw Error("No price data available for ".concat(n.fund_name," in the ").concat(s," range"));return{symbol:n.yahoo_symbol,name:n.fund_name,prices:j,totalDataPoints:I.length,filteredDataPoints:j.length,range:s}}))}clearPriceDataCache(){this.priceDataCache.clear(),console.log("Price data cache cleared")}getCacheStats(){return{cachedSymbols:this.priceDataCache.size,symbols:Array.from(this.priceDataCache.keys())}}constructor(){this.funds=[],this.loaded=!1,this.loading=!1,this.priceDataCache=new Map,this.basePath="/584thjdsy784.github.io"}};s.ZP=d},2050:function(){},9008:function(n,s,a){n.exports=a(9201)},7460:function(n,s){var a,o;void 0!==(o="function"==typeof(a=function r(){var n,s="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==s?s:{},a=!s.document&&!!s.postMessage,o=s.IS_PAPA_WORKER||!1,h={},d=0,C={};function u(n){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(n){var s=b(n);s.chunkSize=parseInt(s.chunkSize),n.step||n.chunk||(s.chunkSize=null),this._handle=new i(s),(this._handle.streamer=this)._config=s}).call(this,n),this.parseChunk=function(n,a){var h=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<h){let s=this._config.newline;s||(d=this._config.quoteChar||'"',s=this._handle.guessLineEndings(n,d)),n=[...n.split(s).slice(h)].join(s)}this.isFirstChunk&&U(this._config.beforeFirstChunk)&&void 0!==(d=this._config.beforeFirstChunk(n))&&(n=d),this.isFirstChunk=!1,this._halted=!1;var h=this._partialLine+n,d=(this._partialLine="",this._handle.parse(h,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(n=d.meta.cursor,this._finished||(this._partialLine=h.substring(n-this._baseIndex),this._baseIndex=n),d&&d.data&&(this._rowCount+=d.data.length),h=this._finished||this._config.preview&&this._rowCount>=this._config.preview,o)s.postMessage({results:d,workerId:C.WORKER_ID,finished:h});else if(U(this._config.chunk)&&!a){if(this._config.chunk(d,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=d=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(d.data),this._completeResults.errors=this._completeResults.errors.concat(d.errors),this._completeResults.meta=d.meta),this._completed||!h||!U(this._config.complete)||d&&d.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),h||d&&d.meta.paused||this._nextChunk(),d}this._halted=!0},this._sendError=function(n){U(this._config.error)?this._config.error(n):o&&this._config.error&&s.postMessage({workerId:C.WORKER_ID,error:n,finished:!1})}}function f(n){var s;(n=n||{}).chunkSize||(n.chunkSize=C.RemoteChunkSize),u.call(this,n),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(n){this._input=n,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(s=new XMLHttpRequest,this._config.withCredentials&&(s.withCredentials=this._config.withCredentials),a||(s.onload=y(this._chunkLoaded,this),s.onerror=y(this._chunkError,this)),s.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var n,o,h=this._config.downloadRequestHeaders;for(o in h)s.setRequestHeader(o,h[o])}this._config.chunkSize&&(n=this._start+this._config.chunkSize-1,s.setRequestHeader("Range","bytes="+this._start+"-"+n));try{s.send(this._config.downloadRequestBody)}catch(n){this._chunkError(n.message)}a&&0===s.status&&this._chunkError()}},this._chunkLoaded=function(){var n;4===s.readyState&&(s.status<200||400<=s.status?this._chunkError():(this._start+=this._config.chunkSize||s.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null!==(n=(n=s).getResponseHeader("Content-Range"))?parseInt(n.substring(n.lastIndexOf("/")+1)):-1),this.parseChunk(s.responseText)))},this._chunkError=function(n){n=s.statusText||n,this._sendError(Error(n))}}function l(n){(n=n||{}).chunkSize||(n.chunkSize=C.LocalChunkSize),u.call(this,n);var s,a,o="undefined"!=typeof FileReader;this.stream=function(n){this._input=n,a=n.slice||n.webkitSlice||n.mozSlice,o?((s=new FileReader).onload=y(this._chunkLoaded,this),s.onerror=y(this._chunkError,this)):s=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var n=this._input,h=(this._config.chunkSize&&(h=Math.min(this._start+this._config.chunkSize,this._input.size),n=a.call(n,this._start,h)),s.readAsText(n,this._config.encoding));o||this._chunkLoaded({target:{result:h}})},this._chunkLoaded=function(n){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(n.target.result)},this._chunkError=function(){this._sendError(s.error)}}function c(n){var s;u.call(this,n=n||{}),this.stream=function(n){return s=n,this._nextChunk()},this._nextChunk=function(){var n,a;if(!this._finished)return s=(n=this._config.chunkSize)?(a=s.substring(0,n),s.substring(n)):(a=s,""),this._finished=!s,this.parseChunk(a)}}function p(n){u.call(this,n=n||{});var s=[],a=!0,o=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(n){this._input=n,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){o&&1===s.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),s.length?this.parseChunk(s.shift()):a=!0},this._streamData=y(function(n){try{s.push("string"==typeof n?n:n.toString(this._config.encoding)),a&&(a=!1,this._checkIsFinished(),this.parseChunk(s.shift()))}catch(n){this._streamError(n)}},this),this._streamError=y(function(n){this._streamCleanUp(),this._sendError(n)},this),this._streamEnd=y(function(){this._streamCleanUp(),o=!0,this._streamData("")},this),this._streamCleanUp=y(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function i(n){var s,a,o,h,d=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,x=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,S=this,D=0,O=0,T=!1,I=!1,j=[],F={data:[],errors:[],meta:{}};function y(s){return"greedy"===n.skipEmptyLines?""===s.join("").trim():1===s.length&&0===s[0].length}function g(){if(F&&o&&(k("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+C.DefaultDelimiter+"'"),o=!1),n.skipEmptyLines&&(F.data=F.data.filter(function(n){return!y(n)})),_()){if(F){if(Array.isArray(F.data[0])){for(var s,a=0;_()&&a<F.data.length;a++)F.data[a].forEach(t);F.data.splice(0,1)}else F.data.forEach(t)}function t(s,a){U(n.transformHeader)&&(s=n.transformHeader(s,a)),j.push(s)}}function i(s,a){for(var o=n.header?{}:[],h=0;h<s.length;h++){var C,S,D=h,T=s[h],T=(C=D=n.header?h>=j.length?"__parsed_extra":j[h]:D,S=T=n.transform?n.transform(T,D):T,(n.dynamicTypingFunction&&void 0===n.dynamicTyping[C]&&(n.dynamicTyping[C]=n.dynamicTypingFunction(C)),!0===(n.dynamicTyping[C]||n.dynamicTyping))?"true"===S||"TRUE"===S||"false"!==S&&"FALSE"!==S&&((n=>{if(d.test(n)&&-9007199254740992<(n=parseFloat(n))&&n<9007199254740992)return 1})(S)?parseFloat(S):x.test(S)?new Date(S):""===S?null:S):S);"__parsed_extra"===D?(o[D]=o[D]||[],o[D].push(T)):o[D]=T}return n.header&&(h>j.length?k("FieldMismatch","TooManyFields","Too many fields: expected "+j.length+" fields but parsed "+h,O+a):h<j.length&&k("FieldMismatch","TooFewFields","Too few fields: expected "+j.length+" fields but parsed "+h,O+a)),o}F&&(n.header||n.dynamicTyping||n.transform)&&(s=1,!F.data.length||Array.isArray(F.data[0])?(F.data=F.data.map(i),s=F.data.length):F.data=i(F.data,0),n.header&&F.meta&&(F.meta.fields=j),O+=s)}function _(){return n.header&&0===j.length}function k(n,s,a,o){n={type:n,code:s,message:a},void 0!==o&&(n.row=o),F.errors.push(n)}U(n.step)&&(h=n.step,n.step=function(s){F=s,_()?g():(g(),0!==F.data.length&&(D+=s.data.length,n.preview&&D>n.preview?a.abort():(F.data=F.data[0],h(F,S))))}),this.parse=function(h,d,x){var S=n.quoteChar||'"',S=(n.newline||(n.newline=this.guessLineEndings(h,S)),o=!1,n.delimiter?U(n.delimiter)&&(n.delimiter=n.delimiter(h),F.meta.delimiter=n.delimiter):((S=((s,a,o,h,d)=>{var x,S,D,O;d=d||[",","	","|",";",C.RECORD_SEP,C.UNIT_SEP];for(var T=0;T<d.length;T++){for(var I,j=d[T],F=0,A=0,L=0,N=(D=void 0,new E({comments:h,delimiter:j,newline:a,preview:10}).parse(s)),z=0;z<N.data.length;z++)o&&y(N.data[z])?L++:(A+=I=N.data[z].length,void 0===D?D=I:0<I&&(F+=Math.abs(I-D),D=I));0<N.data.length&&(A/=N.data.length-L),(void 0===S||F<=S)&&(void 0===O||O<A)&&1.99<A&&(S=F,x=j,O=A)}return{successful:!!(n.delimiter=x),bestDelimiter:x}})(h,n.newline,n.skipEmptyLines,n.comments,n.delimitersToGuess)).successful?n.delimiter=S.bestDelimiter:(o=!0,n.delimiter=C.DefaultDelimiter),F.meta.delimiter=n.delimiter),b(n));return n.preview&&n.header&&S.preview++,s=h,F=(a=new E(S)).parse(s,d,x),g(),T?{meta:{paused:!0}}:F||{meta:{paused:!1}}},this.paused=function(){return T},this.pause=function(){T=!0,a.abort(),s=U(n.chunk)?"":s.substring(a.getCharIndex())},this.resume=function(){S.streamer._halted?(T=!1,S.streamer.parseChunk(s,!0)):setTimeout(S.resume,3)},this.aborted=function(){return I},this.abort=function(){I=!0,a.abort(),F.meta.aborted=!0,U(n.complete)&&n.complete(F),s=""},this.guessLineEndings=function(n,s){n=n.substring(0,1048576);var s=RegExp(P(s)+"([^]*?)"+P(s),"gm"),a=(n=n.replace(s,"")).split("\r"),s=n.split("\n"),n=1<s.length&&s[0].length<a[0].length;if(1===a.length||n)return"\n";for(var o=0,h=0;h<a.length;h++)"\n"===a[h][0]&&o++;return o>=a.length/2?"\r\n":"\r"}}function P(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(n){var s=(n=n||{}).delimiter,a=n.newline,o=n.comments,h=n.step,d=n.preview,x=n.fastMode,S=null,D=!1,O=null==n.quoteChar?'"':n.quoteChar,T=O;if(void 0!==n.escapeChar&&(T=n.escapeChar),("string"!=typeof s||-1<C.BAD_DELIMITERS.indexOf(s))&&(s=","),o===s)throw Error("Comment character same as delimiter");!0===o?o="#":("string"!=typeof o||-1<C.BAD_DELIMITERS.indexOf(o))&&(o=!1),"\n"!==a&&"\r"!==a&&"\r\n"!==a&&(a="\n");var I=0,j=!1;this.parse=function(C,F,A){if("string"!=typeof C)throw Error("Input must be a string");var L=C.length,N=s.length,z=a.length,M=o.length,q=U(h),B=[],W=[],H=[],K=I=0;if(!C)return w();if(x||!1!==x&&-1===C.indexOf(O)){for(var Q=C.split(a),J=0;J<Q.length;J++){if(H=Q[J],I+=H.length,J!==Q.length-1)I+=a.length;else if(A)break;if(!o||H.substring(0,M)!==o){if(q){if(B=[],k(H.split(s)),R(),j)return w()}else k(H.split(s));if(d&&d<=J)return B=B.slice(0,d),w(!0)}}return w()}for(var V=C.indexOf(s,I),Z=C.indexOf(a,I),$=RegExp(P(T)+P(O),"g"),Y=C.indexOf(O,I);;)if(C[I]===O)for(Y=I,I++;;){if(-1===(Y=C.indexOf(O,Y+1)))return A||W.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:B.length,index:I}),E();if(Y===L-1)return E(C.substring(I,Y).replace($,O));if(O===T&&C[Y+1]===T)Y++;else if(O===T||0===Y||C[Y-1]!==T){-1!==V&&V<Y+1&&(V=C.indexOf(s,Y+1));var G=v(-1===(Z=-1!==Z&&Z<Y+1?C.indexOf(a,Y+1):Z)?V:Math.min(V,Z));if(C.substr(Y+1+G,N)===s){H.push(C.substring(I,Y).replace($,O)),C[I=Y+1+G+N]!==O&&(Y=C.indexOf(O,I)),V=C.indexOf(s,I),Z=C.indexOf(a,I);break}if(G=v(Z),C.substring(Y+1+G,Y+1+G+z)===a){if(H.push(C.substring(I,Y).replace($,O)),b(Y+1+G+z),V=C.indexOf(s,I),Y=C.indexOf(O,I),q&&(R(),j))return w();if(d&&B.length>=d)return w(!0);break}W.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:B.length,index:I}),Y++}}else if(o&&0===H.length&&C.substring(I,I+M)===o){if(-1===Z)return w();I=Z+z,Z=C.indexOf(a,I),V=C.indexOf(s,I)}else if(-1!==V&&(V<Z||-1===Z))H.push(C.substring(I,V)),I=V+N,V=C.indexOf(s,I);else{if(-1===Z)break;if(H.push(C.substring(I,Z)),b(Z+z),q&&(R(),j))return w();if(d&&B.length>=d)return w(!0)}return E();function k(n){B.push(n),K=I}function v(n){return -1!==n&&(n=C.substring(Y+1,n))&&""===n.trim()?n.length:0}function E(n){return A||(void 0===n&&(n=C.substring(I)),H.push(n),I=L,k(H),q&&R()),w()}function b(n){I=n,k(H),H=[],Z=C.indexOf(a,I)}function w(o){if(n.header&&!F&&B.length&&!D){var h=B[0],d=Object.create(null),C=new Set(h);let s=!1;for(let a=0;a<h.length;a++){let o=h[a];if(d[o=U(n.transformHeader)?n.transformHeader(o,a):o]){let n,x=d[o];for(;n=o+"_"+x,x++,C.has(n););C.add(n),h[a]=n,d[o]++,s=!0,(S=null===S?{}:S)[n]=o}else d[o]=1,h[a]=o;C.add(o)}s&&console.warn("Duplicate headers found and renamed."),D=!0}return{data:B,errors:W,meta:{delimiter:s,linebreak:a,aborted:j,truncated:!!o,cursor:K+(F||0),renamedHeaders:S}}}function R(){h(w()),B=[],W=[]}},this.abort=function(){j=!0},this.getCharIndex=function(){return I}}function g(n){var s=n.data,a=h[s.workerId],o=!1;if(s.error)a.userError(s.error,s.file);else if(s.results&&s.results.data){var d={abort:function(){o=!0,_(s.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:m,resume:m};if(U(a.userStep)){for(var C=0;C<s.results.data.length&&(a.userStep({data:s.results.data[C],errors:s.results.errors,meta:s.results.meta},d),!o);C++);delete s.results}else U(a.userChunk)&&(a.userChunk(s.results,d,s.file),delete s.results)}s.finished&&!o&&_(s.workerId,s.results)}function _(n,s){var a=h[n];U(a.userComplete)&&a.userComplete(s),a.terminate(),delete h[n]}function m(){throw Error("Not implemented.")}function b(n){if("object"!=typeof n||null===n)return n;var s,a=Array.isArray(n)?[]:{};for(s in n)a[s]=b(n[s]);return a}function y(n,s){return function(){n.apply(s,arguments)}}function U(n){return"function"==typeof n}return C.parse=function(n,a){var o,x,S,D,O=(a=a||{}).dynamicTyping||!1;if(U(O)&&(a.dynamicTypingFunction=O,O={}),a.dynamicTyping=O,a.transform=!!U(a.transform)&&a.transform,!a.worker||!C.WORKERS_SUPPORTED)return O=null,C.NODE_STREAM_INPUT,"string"==typeof n?(n=65279!==(o=n).charCodeAt(0)?o:o.slice(1),O=new(a.download?f:c)(a)):!0===n.readable&&U(n.read)&&U(n.on)?O=new p(a):(s.File&&n instanceof File||n instanceof Object)&&(O=new l(a)),O.stream(n);(O=!!C.WORKERS_SUPPORTED&&(S=s.URL||s.webkitURL||null,D=r.toString(),x=C.BLOB_URL||(C.BLOB_URL=S.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"}))),(x=new s.Worker(x)).onmessage=g,x.id=d++,h[x.id]=x)).userStep=a.step,O.userChunk=a.chunk,O.userComplete=a.complete,O.userError=a.error,a.step=U(a.step),a.chunk=U(a.chunk),a.complete=U(a.complete),a.error=U(a.error),delete a.worker,O.postMessage({input:n,config:a,workerId:O.id})},C.unparse=function(n,s){var a=!1,o=!0,h=",",d="\r\n",x='"',S=x+x,D=!1,O=null,T=!1,I=((()=>{if("object"==typeof s){if("string"!=typeof s.delimiter||C.BAD_DELIMITERS.filter(function(n){return -1!==s.delimiter.indexOf(n)}).length||(h=s.delimiter),("boolean"==typeof s.quotes||"function"==typeof s.quotes||Array.isArray(s.quotes))&&(a=s.quotes),"boolean"!=typeof s.skipEmptyLines&&"string"!=typeof s.skipEmptyLines||(D=s.skipEmptyLines),"string"==typeof s.newline&&(d=s.newline),"string"==typeof s.quoteChar&&(x=s.quoteChar),"boolean"==typeof s.header&&(o=s.header),Array.isArray(s.columns)){if(0===s.columns.length)throw Error("Option columns is empty");O=s.columns}void 0!==s.escapeChar&&(S=s.escapeChar+x),s.escapeFormulae instanceof RegExp?T=s.escapeFormulae:"boolean"==typeof s.escapeFormulae&&s.escapeFormulae&&(T=/^[=+\-@\t\r].*$/)}})(),RegExp(P(x),"g"));if("string"==typeof n&&(n=JSON.parse(n)),Array.isArray(n)){if(!n.length||Array.isArray(n[0]))return u(null,n,D);if("object"==typeof n[0])return u(O||Object.keys(n[0]),n,D)}else if("object"==typeof n)return"string"==typeof n.data&&(n.data=JSON.parse(n.data)),Array.isArray(n.data)&&(n.fields||(n.fields=n.meta&&n.meta.fields||O),n.fields||(n.fields=Array.isArray(n.data[0])?n.fields:"object"==typeof n.data[0]?Object.keys(n.data[0]):[]),Array.isArray(n.data[0])||"object"==typeof n.data[0]||(n.data=[n.data])),u(n.fields||[],n.data||[],D);throw Error("Unable to serialize unrecognized input");function u(n,s,a){var C="",x=("string"==typeof n&&(n=JSON.parse(n)),"string"==typeof s&&(s=JSON.parse(s)),Array.isArray(n)&&0<n.length),S=!Array.isArray(s[0]);if(x&&o){for(var D=0;D<n.length;D++)0<D&&(C+=h),C+=k(n[D],D);0<s.length&&(C+=d)}for(var O=0;O<s.length;O++){var T=(x?n:s[O]).length,I=!1,j=x?0===Object.keys(s[O]).length:0===s[O].length;if(a&&!x&&(I="greedy"===a?""===s[O].join("").trim():1===s[O].length&&0===s[O][0].length),"greedy"===a&&x){for(var F=[],A=0;A<T;A++){var L=S?n[A]:A;F.push(s[O][L])}I=""===F.join("").trim()}if(!I){for(var N=0;N<T;N++){0<N&&!j&&(C+=h);var z=x&&S?n[N]:N;C+=k(s[O][z],N)}O<s.length-1&&(!a||0<T&&!j)&&(C+=d)}}return C}function k(n,s){var o,d;return null==n?"":n.constructor===Date?JSON.stringify(n).slice(1,25):(d=!1,T&&"string"==typeof n&&T.test(n)&&(n="'"+n,d=!0),o=n.toString().replace(I,S),(d=d||!0===a||"function"==typeof a&&a(n,s)||Array.isArray(a)&&a[s]||((n,s)=>{for(var a=0;a<s.length;a++)if(-1<n.indexOf(s[a]))return!0;return!1})(o,C.BAD_DELIMITERS)||-1<o.indexOf(h)||" "===o.charAt(0)||" "===o.charAt(o.length-1))?x+o+x:o)}},C.RECORD_SEP="\x1e",C.UNIT_SEP="\x1f",C.BYTE_ORDER_MARK="\uFEFF",C.BAD_DELIMITERS=["\r","\n",'"',C.BYTE_ORDER_MARK],C.WORKERS_SUPPORTED=!a&&!!s.Worker,C.NODE_STREAM_INPUT=1,C.LocalChunkSize=10485760,C.RemoteChunkSize=5242880,C.DefaultDelimiter=",",C.Parser=E,C.ParserHandle=i,C.NetworkStreamer=f,C.FileStreamer=l,C.StringStreamer=c,C.ReadableStreamStreamer=p,s.jQuery&&((n=s.jQuery).fn.parse=function(a){var o=a.config||{},h=[];return this.each(function(a){if(!("INPUT"===n(this).prop("tagName").toUpperCase()&&"file"===n(this).attr("type").toLowerCase()&&s.FileReader)||!this.files||0===this.files.length)return!0;for(var d=0;d<this.files.length;d++)h.push({file:this.files[d],inputElem:this,instanceConfig:n.extend({},o)})}),e(),this;function e(){if(0===h.length)U(a.complete)&&a.complete();else{var s,o,d,x=h[0];if(U(a.before)){var S=a.before(x.file,x.inputElem);if("object"==typeof S){if("abort"===S.action)return s=x.file,o=x.inputElem,d=S.reason,void(U(a.error)&&a.error({name:"AbortError"},s,o,d));if("skip"===S.action)return void u();"object"==typeof S.config&&(x.instanceConfig=n.extend(x.instanceConfig,S.config))}else if("skip"===S)return void u()}var D=x.instanceConfig.complete;x.instanceConfig.complete=function(n){U(D)&&D(n,x.file,x.inputElem),u()},C.parse(x.file,x.instanceConfig)}}function u(){h.splice(0,1),e()}}),o&&(s.onmessage=function(n){n=n.data,void 0===C.WORKER_ID&&n&&(C.WORKER_ID=n.workerId),"string"==typeof n.input?s.postMessage({workerId:C.WORKER_ID,results:C.parse(n.input,n.config),finished:!0}):(s.File&&n.input instanceof File||n.input instanceof Object)&&(n=C.parse(n.input,n.config))&&s.postMessage({workerId:C.WORKER_ID,results:n,finished:!0})}),(f.prototype=Object.create(u.prototype)).constructor=f,(l.prototype=Object.create(u.prototype)).constructor=l,(c.prototype=Object.create(c.prototype)).constructor=c,(p.prototype=Object.create(u.prototype)).constructor=p,C})?a.apply(s,[]):a)&&(n.exports=o)}},function(n){var __webpack_exec__=function(s){return n(n.s=s)};n.O(0,[774,179],function(){return __webpack_exec__(1118),__webpack_exec__(9974)}),_N_E=n.O()}]);