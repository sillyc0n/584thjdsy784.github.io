(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{3454:function(n,s,a){"use strict";var o,h;n.exports=(null==(o=a.g.process)?void 0:o.env)&&"object"==typeof(null==(h=a.g.process)?void 0:h.env)?a.g.process:a(7663)},1118:function(n,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return a(8397)}])},2598:function(n,s,a){"use strict";a.d(s,{W:function(){return useFunds},m:function(){return FundsProvider}});var o=a(5893),h=a(7294),d=a(6205);let T=(0,h.createContext)(),FundsProvider=n=>{let{children:s}=n,[a,x]=(0,h.useState)([]),[C,S]=(0,h.useState)(!0);return(0,h.useEffect)(()=>{d.ZP.loadFunds().then(n=>{x(n),S(!1)})},[]),(0,o.jsx)(T.Provider,{value:{funds:a,loading:C},children:s})},useFunds=()=>(0,h.useContext)(T)},8397:function(n,s,a){"use strict";a.r(s),a.d(s,{default:function(){return App}});var o=a(5893),h=a(7294),d=a(9008),T=a.n(d);a(2050);var x=a(2598);function App(n){let{Component:s,pageProps:a}=n,[d,C]=(0,h.useState)({investmentStyle:"",selectedFunds:[],allocations:{},riskProfile:{},optimizedPortfolio:null});return(0,h.useEffect)(()=>{let n=globalThis.portfolioStorage||{};Object.keys(n).length>0&&C(n)},[]),(0,h.useEffect)(()=>{globalThis.portfolioStorage=d},[d]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(T(),{children:[(0,o.jsx)("title",{children:"SIPP Portfolio Manager"}),(0,o.jsx)("meta",{name:"description",content:"Optimize your SIPP pension investments with our 3-step portfolio manager"}),(0,o.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,o.jsx)("link",{rel:"icon",href:"images/portfolio_192_192.png"}),(0,o.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,o.jsx)("meta",{name:"theme-color",content:"#2563eb"}),(0,o.jsx)("link",{rel:"apple-touch-icon",href:"images/portfolio_192_192.png"})]}),(0,o.jsx)(x.m,{children:(0,o.jsxs)("div",{className:"container",children:[(0,o.jsx)("div",{className:"header",children:(0,o.jsx)("h1",{children:"SIPP Portfolio Manager"})}),(0,o.jsx)("div",{className:"main-card",children:(0,o.jsx)(s,{...a,portfolioData:d,updatePortfolioData:n=>{C(s=>({...s,...n}))}})})]})})]})}},6205:function(n,s,a){"use strict";a.d(s,{NV:function(){return T}});var o=a(7460),h=a.n(o),d=a(3454);let T=new class{getFullPath(n){let s=n.startsWith("/")?n.slice(1):n,a=this.basePath.endsWith("/")?this.basePath.slice(0,-1):this.basePath;return"".concat(a,"/").concat(s)}async loadFunds(){if(this.loaded||this.loading)return this.funds;this.loading=!0;try{let n=this.getFullPath("/data/funds.csv");console.log("Loading funds from: ".concat(n));let s=await fetch(n);if(!s.ok)throw Error("Failed to fetch funds.csv: ".concat(s.status));let a=await s.text(),o=h().parse(a,{header:!0,dynamicTyping:!0,skipEmptyLines:!0,delimitersToGuess:[",","	","|",";"],transformHeader:n=>n.trim(),transform:(n,s)=>"string"==typeof n&&(n=n.trim(),""===n||"N/A"===n||"null"===n)?null:n});return o.errors.length>0&&console.warn("CSV parsing warnings:",o.errors),this.funds=o.data.filter(n=>n.fund_name&&n.sedol),this.loaded=!0,this.loading=!1,console.log("Loaded ".concat(this.funds.length," funds from CSV")),this.funds}catch(n){throw this.loading=!1,console.error("Error loading funds:",n),n}}getRangeCutoffDate(n){let s=new Date,a=s.getFullYear();switch(n){case"1mo":return new Date(s.getTime()-2592e6).getTime()/1e3;case"3mo":return new Date(s.getTime()-7776e6).getTime()/1e3;case"6mo":return new Date(s.getTime()-15552e6).getTime()/1e3;case"ytd":return new Date(a,0,1).getTime()/1e3;case"1y":return new Date(s.getTime()-31536e6).getTime()/1e3;case"2y":return new Date(s.getTime()-63072e6).getTime()/1e3;case"5y":return new Date(s.getTime()-15768e7).getTime()/1e3;case"10y":return new Date(s.getTime()-31536e7).getTime()/1e3;case"max":return null;default:throw Error("Invalid range: ".concat(n,". Valid ranges are: 1mo, 3mo, 6mo, ytd, 1y, 2y, 5y, 10y, max"))}}filterPriceDataByRange(n,s){let a=this.getRangeCutoffDate(s);return null===a?n:n.filter(n=>n.timestamp>=a)}async fetchPriceData(n,s){if(!n||0===n.length)throw Error("No funds provided");let a=["1mo","3mo","6mo","ytd","1y","2y","5y","10y","max"];if(!a.includes(s))throw Error("Invalid range: ".concat(s,". Valid ranges are: ").concat(a.join(", ")));return await Promise.all(n.map(async n=>{var a,o,h,d,T,x;let C;if(!n.yahoo_symbol)throw Error("No Yahoo symbol found for ".concat(n.fund_name));let S=n.yahoo_symbol;if(this.priceDataCache.has(S))console.log("Using cached data for ".concat(n.fund_name," (").concat(n.yahoo_symbol,")")),C=this.priceDataCache.get(S);else{console.log("Fetching data for ".concat(n.fund_name," (").concat(n.yahoo_symbol,")"));let s=this.getFullPath("/data/quotes_yahoo/".concat(n.yahoo_symbol,".json"));console.log("Loading price data from: ".concat(s));let a=await fetch(s);if(!a.ok)throw Error("Failed to fetch data for ".concat(n.fund_name,": ").concat(a.status));C=await a.json(),this.priceDataCache.set(S,C)}if(!(null===(x=C.chart)||void 0===x?void 0:null===(T=x.result)||void 0===T?void 0:null===(d=T[0])||void 0===d?void 0:null===(h=d.indicators)||void 0===h?void 0:null===(o=h.adjclose)||void 0===o?void 0:null===(a=o[0])||void 0===a?void 0:a.adjclose))throw Error("No price data available for ".concat(n.fund_name));let D=C.chart.result[0].timestamp,O=C.chart.result[0].indicators.adjclose[0].adjclose,I=O.map((n,s)=>({timestamp:D[s],price:n})).filter(n=>null!==n.price),A=this.filterPriceDataByRange(I,s);if(0===A.length)throw Error("No price data available for ".concat(n.fund_name," in the ").concat(s," range"));return{symbol:n.yahoo_symbol,name:n.fund_name,prices:A,totalDataPoints:I.length,filteredDataPoints:A.length,range:s}}))}clearPriceDataCache(){this.priceDataCache.clear(),console.log("Price data cache cleared")}getCacheStats(){return{cachedSymbols:this.priceDataCache.size,symbols:Array.from(this.priceDataCache.keys())}}constructor(){this.funds=[],this.loaded=!1,this.loading=!1,this.priceDataCache=new Map,this.basePath=d.env.BASE_PATH||""}};s.ZP=T},2050:function(){},7663:function(n){!function(){var s={229:function(n){var s,a,o,h=n.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(n){if(s===setTimeout)return setTimeout(n,0);if((s===defaultSetTimout||!s)&&setTimeout)return s=setTimeout,setTimeout(n,0);try{return s(n,0)}catch(a){try{return s.call(null,n,0)}catch(a){return s.call(this,n,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(n){s=defaultSetTimout}try{a="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(n){a=defaultClearTimeout}}();var d=[],T=!1,x=-1;function cleanUpNextTick(){T&&o&&(T=!1,o.length?d=o.concat(d):x=-1,d.length&&drainQueue())}function drainQueue(){if(!T){var n=runTimeout(cleanUpNextTick);T=!0;for(var s=d.length;s;){for(o=d,d=[];++x<s;)o&&o[x].run();x=-1,s=d.length}o=null,T=!1,function(n){if(a===clearTimeout)return clearTimeout(n);if((a===defaultClearTimeout||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(n);try{a(n)}catch(s){try{return a.call(null,n)}catch(s){return a.call(this,n)}}}(n)}}function Item(n,s){this.fun=n,this.array=s}function noop(){}h.nextTick=function(n){var s=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)s[a-1]=arguments[a];d.push(new Item(n,s)),1!==d.length||T||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=noop,h.addListener=noop,h.once=noop,h.off=noop,h.removeListener=noop,h.removeAllListeners=noop,h.emit=noop,h.prependListener=noop,h.prependOnceListener=noop,h.listeners=function(n){return[]},h.binding=function(n){throw Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(n){throw Error("process.chdir is not supported")},h.umask=function(){return 0}}},a={};function __nccwpck_require__(n){var o=a[n];if(void 0!==o)return o.exports;var h=a[n]={exports:{}},d=!0;try{s[n](h,h.exports,__nccwpck_require__),d=!1}finally{d&&delete a[n]}return h.exports}__nccwpck_require__.ab="//";var o=__nccwpck_require__(229);n.exports=o}()},9008:function(n,s,a){n.exports=a(9201)},7460:function(n,s){var a,o;void 0!==(o="function"==typeof(a=function r(){var n,s="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==s?s:{},a=!s.document&&!!s.postMessage,o=s.IS_PAPA_WORKER||!1,h={},d=0,T={};function u(n){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(n){var s=b(n);s.chunkSize=parseInt(s.chunkSize),n.step||n.chunk||(s.chunkSize=null),this._handle=new i(s),(this._handle.streamer=this)._config=s}).call(this,n),this.parseChunk=function(n,a){var h=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<h){let s=this._config.newline;s||(d=this._config.quoteChar||'"',s=this._handle.guessLineEndings(n,d)),n=[...n.split(s).slice(h)].join(s)}this.isFirstChunk&&U(this._config.beforeFirstChunk)&&void 0!==(d=this._config.beforeFirstChunk(n))&&(n=d),this.isFirstChunk=!1,this._halted=!1;var h=this._partialLine+n,d=(this._partialLine="",this._handle.parse(h,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(n=d.meta.cursor,this._finished||(this._partialLine=h.substring(n-this._baseIndex),this._baseIndex=n),d&&d.data&&(this._rowCount+=d.data.length),h=this._finished||this._config.preview&&this._rowCount>=this._config.preview,o)s.postMessage({results:d,workerId:T.WORKER_ID,finished:h});else if(U(this._config.chunk)&&!a){if(this._config.chunk(d,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=d=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(d.data),this._completeResults.errors=this._completeResults.errors.concat(d.errors),this._completeResults.meta=d.meta),this._completed||!h||!U(this._config.complete)||d&&d.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),h||d&&d.meta.paused||this._nextChunk(),d}this._halted=!0},this._sendError=function(n){U(this._config.error)?this._config.error(n):o&&this._config.error&&s.postMessage({workerId:T.WORKER_ID,error:n,finished:!1})}}function f(n){var s;(n=n||{}).chunkSize||(n.chunkSize=T.RemoteChunkSize),u.call(this,n),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(n){this._input=n,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(s=new XMLHttpRequest,this._config.withCredentials&&(s.withCredentials=this._config.withCredentials),a||(s.onload=y(this._chunkLoaded,this),s.onerror=y(this._chunkError,this)),s.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var n,o,h=this._config.downloadRequestHeaders;for(o in h)s.setRequestHeader(o,h[o])}this._config.chunkSize&&(n=this._start+this._config.chunkSize-1,s.setRequestHeader("Range","bytes="+this._start+"-"+n));try{s.send(this._config.downloadRequestBody)}catch(n){this._chunkError(n.message)}a&&0===s.status&&this._chunkError()}},this._chunkLoaded=function(){var n;4===s.readyState&&(s.status<200||400<=s.status?this._chunkError():(this._start+=this._config.chunkSize||s.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null!==(n=(n=s).getResponseHeader("Content-Range"))?parseInt(n.substring(n.lastIndexOf("/")+1)):-1),this.parseChunk(s.responseText)))},this._chunkError=function(n){n=s.statusText||n,this._sendError(Error(n))}}function l(n){(n=n||{}).chunkSize||(n.chunkSize=T.LocalChunkSize),u.call(this,n);var s,a,o="undefined"!=typeof FileReader;this.stream=function(n){this._input=n,a=n.slice||n.webkitSlice||n.mozSlice,o?((s=new FileReader).onload=y(this._chunkLoaded,this),s.onerror=y(this._chunkError,this)):s=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var n=this._input,h=(this._config.chunkSize&&(h=Math.min(this._start+this._config.chunkSize,this._input.size),n=a.call(n,this._start,h)),s.readAsText(n,this._config.encoding));o||this._chunkLoaded({target:{result:h}})},this._chunkLoaded=function(n){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(n.target.result)},this._chunkError=function(){this._sendError(s.error)}}function c(n){var s;u.call(this,n=n||{}),this.stream=function(n){return s=n,this._nextChunk()},this._nextChunk=function(){var n,a;if(!this._finished)return s=(n=this._config.chunkSize)?(a=s.substring(0,n),s.substring(n)):(a=s,""),this._finished=!s,this.parseChunk(a)}}function p(n){u.call(this,n=n||{});var s=[],a=!0,o=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(n){this._input=n,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){o&&1===s.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),s.length?this.parseChunk(s.shift()):a=!0},this._streamData=y(function(n){try{s.push("string"==typeof n?n:n.toString(this._config.encoding)),a&&(a=!1,this._checkIsFinished(),this.parseChunk(s.shift()))}catch(n){this._streamError(n)}},this),this._streamError=y(function(n){this._streamCleanUp(),this._sendError(n)},this),this._streamEnd=y(function(){this._streamCleanUp(),o=!0,this._streamData("")},this),this._streamCleanUp=y(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function i(n){var s,a,o,h,d=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,x=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,C=this,S=0,D=0,O=!1,I=!1,A=[],j={data:[],errors:[],meta:{}};function y(s){return"greedy"===n.skipEmptyLines?""===s.join("").trim():1===s.length&&0===s[0].length}function g(){if(j&&o&&(k("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+T.DefaultDelimiter+"'"),o=!1),n.skipEmptyLines&&(j.data=j.data.filter(function(n){return!y(n)})),_()){if(j){if(Array.isArray(j.data[0])){for(var s,a=0;_()&&a<j.data.length;a++)j.data[a].forEach(t);j.data.splice(0,1)}else j.data.forEach(t)}function t(s,a){U(n.transformHeader)&&(s=n.transformHeader(s,a)),A.push(s)}}function i(s,a){for(var o=n.header?{}:[],h=0;h<s.length;h++){var T,C,S=h,O=s[h],O=(T=S=n.header?h>=A.length?"__parsed_extra":A[h]:S,C=O=n.transform?n.transform(O,S):O,(n.dynamicTypingFunction&&void 0===n.dynamicTyping[T]&&(n.dynamicTyping[T]=n.dynamicTypingFunction(T)),!0===(n.dynamicTyping[T]||n.dynamicTyping))?"true"===C||"TRUE"===C||"false"!==C&&"FALSE"!==C&&((n=>{if(d.test(n)&&-9007199254740992<(n=parseFloat(n))&&n<9007199254740992)return 1})(C)?parseFloat(C):x.test(C)?new Date(C):""===C?null:C):C);"__parsed_extra"===S?(o[S]=o[S]||[],o[S].push(O)):o[S]=O}return n.header&&(h>A.length?k("FieldMismatch","TooManyFields","Too many fields: expected "+A.length+" fields but parsed "+h,D+a):h<A.length&&k("FieldMismatch","TooFewFields","Too few fields: expected "+A.length+" fields but parsed "+h,D+a)),o}j&&(n.header||n.dynamicTyping||n.transform)&&(s=1,!j.data.length||Array.isArray(j.data[0])?(j.data=j.data.map(i),s=j.data.length):j.data=i(j.data,0),n.header&&j.meta&&(j.meta.fields=A),D+=s)}function _(){return n.header&&0===A.length}function k(n,s,a,o){n={type:n,code:s,message:a},void 0!==o&&(n.row=o),j.errors.push(n)}U(n.step)&&(h=n.step,n.step=function(s){j=s,_()?g():(g(),0!==j.data.length&&(S+=s.data.length,n.preview&&S>n.preview?a.abort():(j.data=j.data[0],h(j,C))))}),this.parse=function(h,d,x){var C=n.quoteChar||'"',C=(n.newline||(n.newline=this.guessLineEndings(h,C)),o=!1,n.delimiter?U(n.delimiter)&&(n.delimiter=n.delimiter(h),j.meta.delimiter=n.delimiter):((C=((s,a,o,h,d)=>{var x,C,S,D;d=d||[",","	","|",";",T.RECORD_SEP,T.UNIT_SEP];for(var O=0;O<d.length;O++){for(var I,A=d[O],j=0,F=0,L=0,N=(S=void 0,new E({comments:h,delimiter:A,newline:a,preview:10}).parse(s)),z=0;z<N.data.length;z++)o&&y(N.data[z])?L++:(F+=I=N.data[z].length,void 0===S?S=I:0<I&&(j+=Math.abs(I-S),S=I));0<N.data.length&&(F/=N.data.length-L),(void 0===C||j<=C)&&(void 0===D||D<F)&&1.99<F&&(C=j,x=A,D=F)}return{successful:!!(n.delimiter=x),bestDelimiter:x}})(h,n.newline,n.skipEmptyLines,n.comments,n.delimitersToGuess)).successful?n.delimiter=C.bestDelimiter:(o=!0,n.delimiter=T.DefaultDelimiter),j.meta.delimiter=n.delimiter),b(n));return n.preview&&n.header&&C.preview++,s=h,j=(a=new E(C)).parse(s,d,x),g(),O?{meta:{paused:!0}}:j||{meta:{paused:!1}}},this.paused=function(){return O},this.pause=function(){O=!0,a.abort(),s=U(n.chunk)?"":s.substring(a.getCharIndex())},this.resume=function(){C.streamer._halted?(O=!1,C.streamer.parseChunk(s,!0)):setTimeout(C.resume,3)},this.aborted=function(){return I},this.abort=function(){I=!0,a.abort(),j.meta.aborted=!0,U(n.complete)&&n.complete(j),s=""},this.guessLineEndings=function(n,s){n=n.substring(0,1048576);var s=RegExp(P(s)+"([^]*?)"+P(s),"gm"),a=(n=n.replace(s,"")).split("\r"),s=n.split("\n"),n=1<s.length&&s[0].length<a[0].length;if(1===a.length||n)return"\n";for(var o=0,h=0;h<a.length;h++)"\n"===a[h][0]&&o++;return o>=a.length/2?"\r\n":"\r"}}function P(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(n){var s=(n=n||{}).delimiter,a=n.newline,o=n.comments,h=n.step,d=n.preview,x=n.fastMode,C=null,S=!1,D=null==n.quoteChar?'"':n.quoteChar,O=D;if(void 0!==n.escapeChar&&(O=n.escapeChar),("string"!=typeof s||-1<T.BAD_DELIMITERS.indexOf(s))&&(s=","),o===s)throw Error("Comment character same as delimiter");!0===o?o="#":("string"!=typeof o||-1<T.BAD_DELIMITERS.indexOf(o))&&(o=!1),"\n"!==a&&"\r"!==a&&"\r\n"!==a&&(a="\n");var I=0,A=!1;this.parse=function(T,j,F){if("string"!=typeof T)throw Error("Input must be a string");var L=T.length,N=s.length,z=a.length,M=o.length,q=U(h),B=[],W=[],H=[],K=I=0;if(!T)return w();if(x||!1!==x&&-1===T.indexOf(D)){for(var Q=T.split(a),J=0;J<Q.length;J++){if(H=Q[J],I+=H.length,J!==Q.length-1)I+=a.length;else if(F)break;if(!o||H.substring(0,M)!==o){if(q){if(B=[],k(H.split(s)),R(),A)return w()}else k(H.split(s));if(d&&d<=J)return B=B.slice(0,d),w(!0)}}return w()}for(var V=T.indexOf(s,I),Z=T.indexOf(a,I),$=RegExp(P(O)+P(D),"g"),Y=T.indexOf(D,I);;)if(T[I]===D)for(Y=I,I++;;){if(-1===(Y=T.indexOf(D,Y+1)))return F||W.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:B.length,index:I}),E();if(Y===L-1)return E(T.substring(I,Y).replace($,D));if(D===O&&T[Y+1]===O)Y++;else if(D===O||0===Y||T[Y-1]!==O){-1!==V&&V<Y+1&&(V=T.indexOf(s,Y+1));var G=v(-1===(Z=-1!==Z&&Z<Y+1?T.indexOf(a,Y+1):Z)?V:Math.min(V,Z));if(T.substr(Y+1+G,N)===s){H.push(T.substring(I,Y).replace($,D)),T[I=Y+1+G+N]!==D&&(Y=T.indexOf(D,I)),V=T.indexOf(s,I),Z=T.indexOf(a,I);break}if(G=v(Z),T.substring(Y+1+G,Y+1+G+z)===a){if(H.push(T.substring(I,Y).replace($,D)),b(Y+1+G+z),V=T.indexOf(s,I),Y=T.indexOf(D,I),q&&(R(),A))return w();if(d&&B.length>=d)return w(!0);break}W.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:B.length,index:I}),Y++}}else if(o&&0===H.length&&T.substring(I,I+M)===o){if(-1===Z)return w();I=Z+z,Z=T.indexOf(a,I),V=T.indexOf(s,I)}else if(-1!==V&&(V<Z||-1===Z))H.push(T.substring(I,V)),I=V+N,V=T.indexOf(s,I);else{if(-1===Z)break;if(H.push(T.substring(I,Z)),b(Z+z),q&&(R(),A))return w();if(d&&B.length>=d)return w(!0)}return E();function k(n){B.push(n),K=I}function v(n){return -1!==n&&(n=T.substring(Y+1,n))&&""===n.trim()?n.length:0}function E(n){return F||(void 0===n&&(n=T.substring(I)),H.push(n),I=L,k(H),q&&R()),w()}function b(n){I=n,k(H),H=[],Z=T.indexOf(a,I)}function w(o){if(n.header&&!j&&B.length&&!S){var h=B[0],d=Object.create(null),T=new Set(h);let s=!1;for(let a=0;a<h.length;a++){let o=h[a];if(d[o=U(n.transformHeader)?n.transformHeader(o,a):o]){let n,x=d[o];for(;n=o+"_"+x,x++,T.has(n););T.add(n),h[a]=n,d[o]++,s=!0,(C=null===C?{}:C)[n]=o}else d[o]=1,h[a]=o;T.add(o)}s&&console.warn("Duplicate headers found and renamed."),S=!0}return{data:B,errors:W,meta:{delimiter:s,linebreak:a,aborted:A,truncated:!!o,cursor:K+(j||0),renamedHeaders:C}}}function R(){h(w()),B=[],W=[]}},this.abort=function(){A=!0},this.getCharIndex=function(){return I}}function g(n){var s=n.data,a=h[s.workerId],o=!1;if(s.error)a.userError(s.error,s.file);else if(s.results&&s.results.data){var d={abort:function(){o=!0,_(s.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:m,resume:m};if(U(a.userStep)){for(var T=0;T<s.results.data.length&&(a.userStep({data:s.results.data[T],errors:s.results.errors,meta:s.results.meta},d),!o);T++);delete s.results}else U(a.userChunk)&&(a.userChunk(s.results,d,s.file),delete s.results)}s.finished&&!o&&_(s.workerId,s.results)}function _(n,s){var a=h[n];U(a.userComplete)&&a.userComplete(s),a.terminate(),delete h[n]}function m(){throw Error("Not implemented.")}function b(n){if("object"!=typeof n||null===n)return n;var s,a=Array.isArray(n)?[]:{};for(s in n)a[s]=b(n[s]);return a}function y(n,s){return function(){n.apply(s,arguments)}}function U(n){return"function"==typeof n}return T.parse=function(n,a){var o,x,C,S,D=(a=a||{}).dynamicTyping||!1;if(U(D)&&(a.dynamicTypingFunction=D,D={}),a.dynamicTyping=D,a.transform=!!U(a.transform)&&a.transform,!a.worker||!T.WORKERS_SUPPORTED)return D=null,T.NODE_STREAM_INPUT,"string"==typeof n?(n=65279!==(o=n).charCodeAt(0)?o:o.slice(1),D=new(a.download?f:c)(a)):!0===n.readable&&U(n.read)&&U(n.on)?D=new p(a):(s.File&&n instanceof File||n instanceof Object)&&(D=new l(a)),D.stream(n);(D=!!T.WORKERS_SUPPORTED&&(C=s.URL||s.webkitURL||null,S=r.toString(),x=T.BLOB_URL||(T.BLOB_URL=C.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",S,")();"],{type:"text/javascript"}))),(x=new s.Worker(x)).onmessage=g,x.id=d++,h[x.id]=x)).userStep=a.step,D.userChunk=a.chunk,D.userComplete=a.complete,D.userError=a.error,a.step=U(a.step),a.chunk=U(a.chunk),a.complete=U(a.complete),a.error=U(a.error),delete a.worker,D.postMessage({input:n,config:a,workerId:D.id})},T.unparse=function(n,s){var a=!1,o=!0,h=",",d="\r\n",x='"',C=x+x,S=!1,D=null,O=!1,I=((()=>{if("object"==typeof s){if("string"!=typeof s.delimiter||T.BAD_DELIMITERS.filter(function(n){return -1!==s.delimiter.indexOf(n)}).length||(h=s.delimiter),("boolean"==typeof s.quotes||"function"==typeof s.quotes||Array.isArray(s.quotes))&&(a=s.quotes),"boolean"!=typeof s.skipEmptyLines&&"string"!=typeof s.skipEmptyLines||(S=s.skipEmptyLines),"string"==typeof s.newline&&(d=s.newline),"string"==typeof s.quoteChar&&(x=s.quoteChar),"boolean"==typeof s.header&&(o=s.header),Array.isArray(s.columns)){if(0===s.columns.length)throw Error("Option columns is empty");D=s.columns}void 0!==s.escapeChar&&(C=s.escapeChar+x),s.escapeFormulae instanceof RegExp?O=s.escapeFormulae:"boolean"==typeof s.escapeFormulae&&s.escapeFormulae&&(O=/^[=+\-@\t\r].*$/)}})(),RegExp(P(x),"g"));if("string"==typeof n&&(n=JSON.parse(n)),Array.isArray(n)){if(!n.length||Array.isArray(n[0]))return u(null,n,S);if("object"==typeof n[0])return u(D||Object.keys(n[0]),n,S)}else if("object"==typeof n)return"string"==typeof n.data&&(n.data=JSON.parse(n.data)),Array.isArray(n.data)&&(n.fields||(n.fields=n.meta&&n.meta.fields||D),n.fields||(n.fields=Array.isArray(n.data[0])?n.fields:"object"==typeof n.data[0]?Object.keys(n.data[0]):[]),Array.isArray(n.data[0])||"object"==typeof n.data[0]||(n.data=[n.data])),u(n.fields||[],n.data||[],S);throw Error("Unable to serialize unrecognized input");function u(n,s,a){var T="",x=("string"==typeof n&&(n=JSON.parse(n)),"string"==typeof s&&(s=JSON.parse(s)),Array.isArray(n)&&0<n.length),C=!Array.isArray(s[0]);if(x&&o){for(var S=0;S<n.length;S++)0<S&&(T+=h),T+=k(n[S],S);0<s.length&&(T+=d)}for(var D=0;D<s.length;D++){var O=(x?n:s[D]).length,I=!1,A=x?0===Object.keys(s[D]).length:0===s[D].length;if(a&&!x&&(I="greedy"===a?""===s[D].join("").trim():1===s[D].length&&0===s[D][0].length),"greedy"===a&&x){for(var j=[],F=0;F<O;F++){var L=C?n[F]:F;j.push(s[D][L])}I=""===j.join("").trim()}if(!I){for(var N=0;N<O;N++){0<N&&!A&&(T+=h);var z=x&&C?n[N]:N;T+=k(s[D][z],N)}D<s.length-1&&(!a||0<O&&!A)&&(T+=d)}}return T}function k(n,s){var o,d;return null==n?"":n.constructor===Date?JSON.stringify(n).slice(1,25):(d=!1,O&&"string"==typeof n&&O.test(n)&&(n="'"+n,d=!0),o=n.toString().replace(I,C),(d=d||!0===a||"function"==typeof a&&a(n,s)||Array.isArray(a)&&a[s]||((n,s)=>{for(var a=0;a<s.length;a++)if(-1<n.indexOf(s[a]))return!0;return!1})(o,T.BAD_DELIMITERS)||-1<o.indexOf(h)||" "===o.charAt(0)||" "===o.charAt(o.length-1))?x+o+x:o)}},T.RECORD_SEP="\x1e",T.UNIT_SEP="\x1f",T.BYTE_ORDER_MARK="\uFEFF",T.BAD_DELIMITERS=["\r","\n",'"',T.BYTE_ORDER_MARK],T.WORKERS_SUPPORTED=!a&&!!s.Worker,T.NODE_STREAM_INPUT=1,T.LocalChunkSize=10485760,T.RemoteChunkSize=5242880,T.DefaultDelimiter=",",T.Parser=E,T.ParserHandle=i,T.NetworkStreamer=f,T.FileStreamer=l,T.StringStreamer=c,T.ReadableStreamStreamer=p,s.jQuery&&((n=s.jQuery).fn.parse=function(a){var o=a.config||{},h=[];return this.each(function(a){if(!("INPUT"===n(this).prop("tagName").toUpperCase()&&"file"===n(this).attr("type").toLowerCase()&&s.FileReader)||!this.files||0===this.files.length)return!0;for(var d=0;d<this.files.length;d++)h.push({file:this.files[d],inputElem:this,instanceConfig:n.extend({},o)})}),e(),this;function e(){if(0===h.length)U(a.complete)&&a.complete();else{var s,o,d,x=h[0];if(U(a.before)){var C=a.before(x.file,x.inputElem);if("object"==typeof C){if("abort"===C.action)return s=x.file,o=x.inputElem,d=C.reason,void(U(a.error)&&a.error({name:"AbortError"},s,o,d));if("skip"===C.action)return void u();"object"==typeof C.config&&(x.instanceConfig=n.extend(x.instanceConfig,C.config))}else if("skip"===C)return void u()}var S=x.instanceConfig.complete;x.instanceConfig.complete=function(n){U(S)&&S(n,x.file,x.inputElem),u()},T.parse(x.file,x.instanceConfig)}}function u(){h.splice(0,1),e()}}),o&&(s.onmessage=function(n){n=n.data,void 0===T.WORKER_ID&&n&&(T.WORKER_ID=n.workerId),"string"==typeof n.input?s.postMessage({workerId:T.WORKER_ID,results:T.parse(n.input,n.config),finished:!0}):(s.File&&n.input instanceof File||n.input instanceof Object)&&(n=T.parse(n.input,n.config))&&s.postMessage({workerId:T.WORKER_ID,results:n,finished:!0})}),(f.prototype=Object.create(u.prototype)).constructor=f,(l.prototype=Object.create(u.prototype)).constructor=l,(c.prototype=Object.create(c.prototype)).constructor=c,(p.prototype=Object.create(u.prototype)).constructor=p,T})?a.apply(s,[]):a)&&(n.exports=o)}},function(n){var __webpack_exec__=function(s){return n(n.s=s)};n.O(0,[774,179],function(){return __webpack_exec__(1118),__webpack_exec__(9974)}),_N_E=n.O()}]);